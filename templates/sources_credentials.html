<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sources and Credentials</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            position: relative;
        }

        body.dark-mode {
            background-color: #000;
            color: #fff;
        }

        body.light-mode {
            background-color: #fff;
            color: #000;
        }

        .container {
            max-width: 800px;
            padding: 40px;
            background-color: #333;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }

        .container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.7);
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: fadeIn 1s ease;
        }

        .input-container {
            margin-bottom: 30px;
            animation: fadeInUp 1s ease;
        }

        .input-container label {
            font-size: 16px;
            margin-bottom: 10px;
            display: block;
            text-align: left;
        }

        .input-container textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #777;
            border-radius: 8px;
            resize: vertical;
            font-size: 14px;
            background-color: #555;
            color: #fff;
            outline: none;
        }

        .submit-btn,
        .clear-btn {
            padding: 10px 20px;
            font-size: 16px;
            color: #fff;
            background-color: #2e8b57;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            animation: fadeInUp 1s ease;
        }

        .submit-btn:hover,
        .clear-btn:hover {
            background-color: #3cb371;
        }

        .result-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #444;
            border-radius: 5px;
            text-align: left;
            animation: fadeInDown 1s ease;
        }

        .result-section h3 {
            margin-bottom: 10px;
        }

        .result-section ul {
            padding-left: 20px;
        }

        .result-section li {
            margin-bottom: 5px;
        }

        .loader {
            position: absolute;
            top: 50px;
            right: 20px;
            display: none;
            animation: fadeIn 1s ease;
        }

        .loader i {
            font-size: 20px;
            color: #3cb371;
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            0% {
                opacity: 0;
                transform: translateY(-20px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .toggle-container {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
        }

        .toggle-label {
            font-size: 14px;
            margin-right: 10px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
            background-color: #777;
            border-radius: 20px;
            cursor: pointer;
        }

        .toggle-switch-inner {
            position: absolute;
            left: 2px;
            top: 2px;
            width: 16px;
            height: 16px;
            background-color: #fff;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        input[type="checkbox"] {
            display: none;
        }

        input[type="checkbox"]:checked + .toggle-switch .toggle-switch-inner {
            transform: translateX(20px);
        }

        .attention-weights-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #444;
            border-radius: 5px;
            text-align: left;
            animation: fadeInDown 1s ease;
        }

        .attention-weights-section h3 {
            margin-bottom: 10px;
        }

        .attention-weights-section ul {
            padding-left: 20px;
        }

        .attention-weights-section li {
            margin-bottom: 5px;
        }

        .attention-weights-visualization {
            margin-top: 30px;
            padding: 20px;
            background-color: #444;
            border-radius: 5px;
            text-align: left;
            animation: fadeInDown 1s ease;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 200px;
            background-color: #222;
            padding: 20px;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 999;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .sidebar-header {
            margin-bottom: 20px;
            text-align: center;
        }

        .sidebar-title {
            font-size: 20px;
            font-weight: bold;
            color: #fff;
        }

        .sidebar-menu {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .sidebar-menu li {
            margin-bottom: 10px;
        }

        .sidebar-menu a {
            display: block;
            padding: 10px;
            color: #fff;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }

        .sidebar-menu a:hover {
            background-color: #555;
        }

        .sidebar-toggle {
            position: fixed;
            left: 20px;
            top: 20px;
            font-size: 24px;
            color: #fff;
            cursor: pointer;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar-toggle:hover {
            transform: scale(1.2);
        }

        .content {
            margin-left: 200px;
            padding: 20px;
            transition: margin-left 0.3s ease;
        }

        .content.expanded {
            margin-left: 0;
        }

        .team-photos {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .team-photos img {
            border-radius: 50%;
            width: 100px;
            height: 100px;
        }

        .team-photos div {
            text-align: center;
            margin-top: 10px;
            color: #fff;
        }
    </style>
</head>
<body class="dark-mode">
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">Menu</h3>
        </div>
        <ul class="sidebar-menu">
            <li><a href="/">Home</a></li>
            <li><a href="/model-overview">Model Overview</a></li>
            <li><a href="/data-overview">Data Overview</a></li>
            <li><a href="/scibert-overview">SciBERT Overview</a></li>
            <li><a href="/sources-credentials">Sources/Credentials</a></li>
        </ul>
    </div>

    <div class="sidebar-toggle" id="sidebar-toggle">
        <i class="fas fa-bars"></i>
    </div>

    <div class="content" id="content">
        <div class="container">
            <div class="toggle-container">
                <span class="toggle-label">Dark Mode:</span>
                <label class="toggle-switch" for="mode-toggle">
                    <input type="checkbox" id="mode-toggle">
                    <span class="toggle-switch-inner"></span>
                </label>
            </div>
            <div class="title">Sources and Credentials</div>
            <div class="result-section">
                <h3>Dataset Sources</h3>
                <ul>
                    <li>arXiv</li>
                    <li>Google Scholar</li>
                    <li>ChatGPT</li>
                    <li>Hugging Face</li>
                    <li>FactCheck</li>
                    <li>NaturalNews</li>
                    <li>Other sources only used for 2-3 samples, too long to list individually</li>
                </ul>
            </div>
            <div class="result-section">
                <h3>Model References</h3>
                <ul>
                    <li>Beltagy, I., Lo, K., & Cohan, A. (2019). SciBERT: A Pretrained Language Model for Scientific Text. arXiv preprint arXiv:1903.10676.</li>
                    <li>Devlin, J., Chang, M. W., Lee, K., & Toutanova, K. (2019). BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding. arXiv preprint arXiv:1810.04805.</li>
                    <li>Joachims, T. (1998). Text categorization with support vector machines: Learning with many relevant features. In European conference on machine learning (pp. 137-142). Springer, Berlin, Heidelberg.</li>
                    <li>Hearst, M. A., Dumais, S. T., Osuna, E., Platt, J., & Scholkopf, B. (1998). Support vector machines. IEEE Intelligent Systems and their Applications, 13(4), 18-28.</li>
                    <li>Vapnik, V. (1995). The nature of statistical learning theory. Springer science & business media.</li>
                </ul>
            </div>
            <div class="result-section">
                <h3>Project Contributors</h3>
            </div>
            <div class="team-photos">
                <div>
                    <img src="/visualizations/1.png" alt="Phani Vishnubhotla">
                    <div>Phani Vishnubhotla</div>
                </div>
                <div>
                    <img src="/visualizations/2.png" alt="Nicolas Grunwald">
                    <div>Nicolas Grunwald</div>
                </div>
                <div>
                    <img src="/visualizations/3.png" alt="Diana Akolzina">
                    <div>Diana Akolzina</div>
                </div>
                <div>
                    <img src="/visualizations/4.png" alt="Nevena Andretta">
                    <div>Nevena Andretta</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById("classify-btn").addEventListener("click", function () {
            document.getElementById("loader").style.display = "block"; // Show loader

            // Get text from textarea
            var text = document.getElementById("text").value;

            // Make POST request to FastAPI backend
            fetch("/classify", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded",
                },
                body: new URLSearchParams({
                    text: text
                })
            })
            .then(response => response.json())
            .then(data => {
                // Update classification results
                document.getElementById("baseline-result").textContent = data.baseline_prediction;
                document.getElementById("scibert-result").textContent = data.scibert_predictions.join(', ');
                document.getElementById("scibert-probability").textContent = (data.scibert_probability * 100).toFixed(2) + '%';

                // Update text statistics
                document.getElementById("num-words").textContent = data.num_words;
                document.getElementById("num-unique-words").textContent = data.num_unique_words;
                document.getElementById("num-sentences").textContent = data.num_sentences;

                // Update frequent words
                const frequentWordsList = document.getElementById("frequent-words-list");
                frequentWordsList.innerHTML = '';
                data.frequent_words.forEach(word => {
                    const li = document.createElement("li");
                    li.textContent = word;
                    frequentWordsList.appendChild(li);
                });

                // Update frequent bigrams
                const frequentBigramsList = document.getElementById("frequent-bigrams-list");
                frequentBigramsList.innerHTML = '';
                data.frequent_bigrams.forEach(bigram => {
                    const li = document.createElement("li");
                    li.textContent = bigram;
                    frequentBigramsList.appendChild(li);
                });

                // Show result sections
                document.getElementById("result-section").style.display = "block";
                document.getElementById("text-stats").style.display = "block";
                if (data.frequent_words.length > 0) {
                    document.getElementById("frequent-words-section").style.display = "block";
                }
                if (data.frequent_bigrams.length > 0) {
                    document.getElementById("frequent-bigrams-section").style.display = "block";
                }

                // Show attention weights visualization
                if (data.attention_weights && data.tokens) {
                    const ctx = document.getElementById('attention-weights-chart').getContext('2d');
                    const chart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: data.tokens,
                            datasets: [{
                                label: 'Attention Weights',
                                data: data.attention_weights,
                                backgroundColor: 'rgba(46, 139, 87, 0.6)',
                                borderColor: 'rgba(46, 139, 87, 1)',
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                x: {
                                    ticks: {
                                        color: '#fff'
                                    }
                                },
                                y: {
                                    beginAtZero: true,
                                    ticks: {
                                        color: '#fff'
                                    }
                                }
                            },
                            plugins: {
                                legend: {
                                    labels: {
                                        color: '#fff'
                                    }
                                }
                            }
                        }
                    });
                    document.getElementById("attention-weights-visualization").style.display = "block";
                } else {
                    document.getElementById("attention-weights-visualization").style.display = "none";
                }

                document.getElementById("loader").style.display = "none"; // Hide loader
            })
            .catch(error => {
                console.error("Error:", error);
                document.getElementById("loader").style.display = "none"; // Hide loader
            });
        });

        // Clear text button functionality
        document.getElementById("clear-btn").addEventListener("click", function () {
            document.getElementById("text").value = ""; // Clear text area
        });

        // Light/dark mode toggle
        document.getElementById("mode-toggle").addEventListener("change", function () {
            document.body.classList.toggle("dark-mode"); // Toggle dark mode
            document.body.classList.toggle("light-mode"); // Toggle light mode
        });
    </script>
</body>
</html>
